\doxysection{rtc.\+h File Reference}
\hypertarget{rtc_8h}{}\label{rtc_8h}\index{rtc.h@{rtc.h}}


This file contains the implementation of the RTC functions ~\newline
  


{\ttfamily \#include $<$minix/sysutil.\+h$>$}\newline
{\ttfamily \#include $<$lcom/lcf.\+h$>$}\newline
Include dependency graph for rtc.\+h\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=236pt]{rtc_8h__incl}
\end{center}
\end{figure}
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structrtc__date__t}{rtc\+\_\+date\+\_\+t}}
\begin{DoxyCompactList}\small\item\em Struct that contains the date and time. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{rtc_8h_a4e22feb6ffbc1cda32fadff5c740dc51}\label{rtc_8h_a4e22feb6ffbc1cda32fadff5c740dc51} 
\#define {\bfseries RTC\+\_\+\+IRQ}~8
\item 
\Hypertarget{rtc_8h_a710b98232df2c563009e6f8a6cd18220}\label{rtc_8h_a710b98232df2c563009e6f8a6cd18220} 
\#define {\bfseries RTC\+\_\+\+ADDR\+\_\+\+REG}~0x70
\item 
\Hypertarget{rtc_8h_a2f258a00c59c3f347c8d2d4a75471ce0}\label{rtc_8h_a2f258a00c59c3f347c8d2d4a75471ce0} 
\#define {\bfseries RTC\+\_\+\+DATA\+\_\+\+REG}~0x71
\item 
\Hypertarget{rtc_8h_ae5f10956ba62ce1011fbd823e7eb8deb}\label{rtc_8h_ae5f10956ba62ce1011fbd823e7eb8deb} 
\#define {\bfseries RTC\+\_\+\+SECONDS\+\_\+\+LOC}~0
\item 
\Hypertarget{rtc_8h_aec8506f583797c2ecb89cb4bc301ef7d}\label{rtc_8h_aec8506f583797c2ecb89cb4bc301ef7d} 
\#define {\bfseries RTC\+\_\+\+MINUTES\+\_\+\+LOC}~2
\item 
\Hypertarget{rtc_8h_ad30f7fbf8420c58e84d7691d6b2a7bb3}\label{rtc_8h_ad30f7fbf8420c58e84d7691d6b2a7bb3} 
\#define {\bfseries RTC\+\_\+\+HOURS\+\_\+\+LOC}~4
\item 
\Hypertarget{rtc_8h_ae60ae96290aa62bf7467600250c93df7}\label{rtc_8h_ae60ae96290aa62bf7467600250c93df7} 
\#define {\bfseries RTC\+\_\+\+DAY\+\_\+\+LOC}~7
\item 
\Hypertarget{rtc_8h_a7118c7b5779ad77d2be6e4d65fb23854}\label{rtc_8h_a7118c7b5779ad77d2be6e4d65fb23854} 
\#define {\bfseries RTC\+\_\+\+MONTH\+\_\+\+LOC}~8
\item 
\Hypertarget{rtc_8h_a6ab99ad9253293801c52c2c8409ea3f3}\label{rtc_8h_a6ab99ad9253293801c52c2c8409ea3f3} 
\#define {\bfseries RTC\+\_\+\+YEAR\+\_\+\+LOC}~9
\item 
\Hypertarget{rtc_8h_a4c339a60fd52400db75adc69e6a9d38d}\label{rtc_8h_a4c339a60fd52400db75adc69e6a9d38d} 
\#define {\bfseries RTC\+\_\+\+SECONDS\+\_\+\+ALARM\+\_\+\+LOC}~1
\item 
\Hypertarget{rtc_8h_a3e7e531b1a564a83944560bdb1560701}\label{rtc_8h_a3e7e531b1a564a83944560bdb1560701} 
\#define {\bfseries RTC\+\_\+\+MINUTES\+\_\+\+ALARM\+\_\+\+LOC}~3
\item 
\Hypertarget{rtc_8h_aa213eda10b7d1be2c3280a0e47d786b7}\label{rtc_8h_aa213eda10b7d1be2c3280a0e47d786b7} 
\#define {\bfseries RTC\+\_\+\+HOURS\+\_\+\+ALARM\+\_\+\+LOC}~5
\item 
\Hypertarget{rtc_8h_ae5ffad506b363f28bed1bb5e5926bd2d}\label{rtc_8h_ae5ffad506b363f28bed1bb5e5926bd2d} 
\#define {\bfseries RTC\+\_\+\+REG\+\_\+A}~10
\item 
\Hypertarget{rtc_8h_a03954a63ead3f02b7790ce79e9877eea}\label{rtc_8h_a03954a63ead3f02b7790ce79e9877eea} 
\#define {\bfseries RTC\+\_\+\+REG\+\_\+B}~11
\item 
\Hypertarget{rtc_8h_a1bd6f771dc313129723812fe7ac52d9e}\label{rtc_8h_a1bd6f771dc313129723812fe7ac52d9e} 
\#define {\bfseries RTC\+\_\+\+REG\+\_\+C}~12
\item 
\Hypertarget{rtc_8h_a34c8604ade07f4f7ff7e919f2d4c56b4}\label{rtc_8h_a34c8604ade07f4f7ff7e919f2d4c56b4} 
\#define {\bfseries RTC\+\_\+\+REG\+\_\+D}~13
\item 
\Hypertarget{rtc_8h_a2361c99a62690b19aacfdb05e19bee2b}\label{rtc_8h_a2361c99a62690b19aacfdb05e19bee2b} 
\#define {\bfseries UIP\+\_\+\+REG\+\_\+A}~BIT(7)
\item 
\Hypertarget{rtc_8h_a8ca4547b66ba6771ca72fa132bb4cec0}\label{rtc_8h_a8ca4547b66ba6771ca72fa132bb4cec0} 
\#define {\bfseries RTC\+\_\+\+DONT\+\_\+\+CARE}~(BIT(7) \texorpdfstring{$\vert$}{|} BIT(6))
\item 
\Hypertarget{rtc_8h_aad2752d3d9d5b6b21071bdc0e988499d}\label{rtc_8h_aad2752d3d9d5b6b21071bdc0e988499d} 
\#define {\bfseries SET\+\_\+\+REG\+\_\+B}~BIT(7)
\item 
\Hypertarget{rtc_8h_a83b4faa3a1064e2442be22ffa42a5889}\label{rtc_8h_a83b4faa3a1064e2442be22ffa42a5889} 
\#define {\bfseries PIE\+\_\+\+REG\+\_\+B}~BIT(6)
\item 
\Hypertarget{rtc_8h_aa415b19f24e80965b458b674ad347ceb}\label{rtc_8h_aa415b19f24e80965b458b674ad347ceb} 
\#define {\bfseries AIE\+\_\+\+REG\+\_\+B}~BIT(5)
\item 
\Hypertarget{rtc_8h_a47e744ccc1f845e8cbb08df3c02165ea}\label{rtc_8h_a47e744ccc1f845e8cbb08df3c02165ea} 
\#define {\bfseries UIE\+\_\+\+REG\+\_\+B}~BIT(4)
\item 
\Hypertarget{rtc_8h_a8bdc96aa1b98d3647f58ecee8cba43c2}\label{rtc_8h_a8bdc96aa1b98d3647f58ecee8cba43c2} 
\#define {\bfseries AF\+\_\+\+REG\+\_\+C}~BIT(5)
\item 
\Hypertarget{rtc_8h_a91796f6a9ee66da0fcdddea85c43ad76}\label{rtc_8h_a91796f6a9ee66da0fcdddea85c43ad76} 
\#define {\bfseries UF\+\_\+\+REG\+\_\+C}~BIT(4)
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{rtc_8h_ab24e6f39ef99db1cdf9a2c6e26233bb3}{rtc\+\_\+subscribe\+\_\+int}} (uint16\+\_\+t \texorpdfstring{$\ast$}{*}bit\+\_\+no)
\begin{DoxyCompactList}\small\item\em Subscribes and enables RTC interrupts. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{rtc_8h_ab8f17bf5280c908c8b199a90fefcc758}{rtc\+\_\+unsubscribe\+\_\+int}} ()
\begin{DoxyCompactList}\small\item\em Unsubscribes RTC interrupts. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{rtc_8h_a4c1a7a6487a05aec45012e5298134758}{rtc\+\_\+read\+\_\+date}} ()
\begin{DoxyCompactList}\small\item\em Reads the date from the RTC. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{rtc_8h_a76827856de45c0728d613f90c5f6e009}{rtc\+\_\+read\+\_\+reg}} (uint8\+\_\+t reg, uint8\+\_\+t \texorpdfstring{$\ast$}{*}data)
\begin{DoxyCompactList}\small\item\em Reads a register from the RTC. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{rtc_8h_aa1fd64645937078b75ec6046b11b432e}{rtc\+\_\+write\+\_\+reg}} (uint8\+\_\+t reg, uint8\+\_\+t data)
\begin{DoxyCompactList}\small\item\em Writes a register from the RTC. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{rtc_8h_ad01b060b01d5a6021392d1453f86a733}{rtc\+\_\+bcd\+\_\+to\+\_\+binary}} (uint8\+\_\+t bcd)
\begin{DoxyCompactList}\small\item\em Converts a binary number to BCD. \end{DoxyCompactList}\item 
\Hypertarget{rtc_8h_a75dad42881d64cf07cf1bdc2979a7056}\label{rtc_8h_a75dad42881d64cf07cf1bdc2979a7056} 
void {\bfseries rtc\+\_\+ih} ()
\begin{DoxyCompactList}\small\item\em RTC interrupt handler. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{rtc_8h_aae8111e1cb8e86c24e0becc84ee4ce29}{rtc\+\_\+enable\+\_\+alarm\+\_\+int}} ()
\begin{DoxyCompactList}\small\item\em Enables RTC alarm interrupt. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{rtc_8h_ae17e9c9642400e83542d8170676ff50f}{rtc\+\_\+disable\+\_\+int}} ()
\begin{DoxyCompactList}\small\item\em Disables RTC alarm interrupt. \end{DoxyCompactList}\item 
\mbox{\hyperlink{structrtc__date__t}{rtc\+\_\+date\+\_\+t}} \mbox{\hyperlink{rtc_8h_a8a934d31134c70ff080aa663e25fe436}{rtc\+\_\+get\+\_\+date}} ()
\begin{DoxyCompactList}\small\item\em Gets the date from the RTC. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{rtc_8h_a11e438d0669b30b2c97af0665ec96ed1}{rtc\+\_\+set\+\_\+reg\+B\+\_\+bit}} ()
\begin{DoxyCompactList}\small\item\em Sets bit 7 of register B to 1. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{rtc_8h_af9899143b10300540808effb01aa292b}{rtc\+\_\+clear\+\_\+reg\+B\+\_\+bit}} ()
\begin{DoxyCompactList}\small\item\em Clears bit 7 of register B. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{rtc_8h_a0a6fd09353e9e32173333e7a32997c88}{rtc\+\_\+set\+\_\+alarm}} ()
\begin{DoxyCompactList}\small\item\em Sets the alarm of the RTC. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This file contains the implementation of the RTC functions ~\newline
 



\doxysubsection{Function Documentation}
\Hypertarget{rtc_8h_ad01b060b01d5a6021392d1453f86a733}\label{rtc_8h_ad01b060b01d5a6021392d1453f86a733} 
\index{rtc.h@{rtc.h}!rtc\_bcd\_to\_binary@{rtc\_bcd\_to\_binary}}
\index{rtc\_bcd\_to\_binary@{rtc\_bcd\_to\_binary}!rtc.h@{rtc.h}}
\doxysubsubsection{\texorpdfstring{rtc\_bcd\_to\_binary()}{rtc\_bcd\_to\_binary()}}
{\footnotesize\ttfamily uint8\+\_\+t rtc\+\_\+bcd\+\_\+to\+\_\+binary (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{bcd }\end{DoxyParamCaption})}



Converts a binary number to BCD. 


\begin{DoxyParams}{Parameters}
{\em binary} & Binary number to convert \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Converted BCD number 
\end{DoxyReturn}
\Hypertarget{rtc_8h_af9899143b10300540808effb01aa292b}\label{rtc_8h_af9899143b10300540808effb01aa292b} 
\index{rtc.h@{rtc.h}!rtc\_clear\_regB\_bit@{rtc\_clear\_regB\_bit}}
\index{rtc\_clear\_regB\_bit@{rtc\_clear\_regB\_bit}!rtc.h@{rtc.h}}
\doxysubsubsection{\texorpdfstring{rtc\_clear\_regB\_bit()}{rtc\_clear\_regB\_bit()}}
{\footnotesize\ttfamily int rtc\+\_\+clear\+\_\+reg\+B\+\_\+bit (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Clears bit 7 of register B. 

\begin{DoxyReturn}{Returns}
0 if successful, non 0 otherwise 
\end{DoxyReturn}
\Hypertarget{rtc_8h_ae17e9c9642400e83542d8170676ff50f}\label{rtc_8h_ae17e9c9642400e83542d8170676ff50f} 
\index{rtc.h@{rtc.h}!rtc\_disable\_int@{rtc\_disable\_int}}
\index{rtc\_disable\_int@{rtc\_disable\_int}!rtc.h@{rtc.h}}
\doxysubsubsection{\texorpdfstring{rtc\_disable\_int()}{rtc\_disable\_int()}}
{\footnotesize\ttfamily int rtc\+\_\+disable\+\_\+int (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Disables RTC alarm interrupt. 

\begin{DoxyReturn}{Returns}
0 if successful, non 0 otherwise 
\end{DoxyReturn}
\Hypertarget{rtc_8h_aae8111e1cb8e86c24e0becc84ee4ce29}\label{rtc_8h_aae8111e1cb8e86c24e0becc84ee4ce29} 
\index{rtc.h@{rtc.h}!rtc\_enable\_alarm\_int@{rtc\_enable\_alarm\_int}}
\index{rtc\_enable\_alarm\_int@{rtc\_enable\_alarm\_int}!rtc.h@{rtc.h}}
\doxysubsubsection{\texorpdfstring{rtc\_enable\_alarm\_int()}{rtc\_enable\_alarm\_int()}}
{\footnotesize\ttfamily int rtc\+\_\+enable\+\_\+alarm\+\_\+int (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Enables RTC alarm interrupt. 

\begin{DoxyReturn}{Returns}
0 if successful, non 0 otherwise 
\end{DoxyReturn}
\Hypertarget{rtc_8h_a8a934d31134c70ff080aa663e25fe436}\label{rtc_8h_a8a934d31134c70ff080aa663e25fe436} 
\index{rtc.h@{rtc.h}!rtc\_get\_date@{rtc\_get\_date}}
\index{rtc\_get\_date@{rtc\_get\_date}!rtc.h@{rtc.h}}
\doxysubsubsection{\texorpdfstring{rtc\_get\_date()}{rtc\_get\_date()}}
{\footnotesize\ttfamily \mbox{\hyperlink{structrtc__date__t}{rtc\+\_\+date\+\_\+t}} rtc\+\_\+get\+\_\+date (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Gets the date from the RTC. 

\begin{DoxyReturn}{Returns}
\doxylink{structrtc__date__t}{rtc\+\_\+date\+\_\+t} struct with the date 
\end{DoxyReturn}
\Hypertarget{rtc_8h_a4c1a7a6487a05aec45012e5298134758}\label{rtc_8h_a4c1a7a6487a05aec45012e5298134758} 
\index{rtc.h@{rtc.h}!rtc\_read\_date@{rtc\_read\_date}}
\index{rtc\_read\_date@{rtc\_read\_date}!rtc.h@{rtc.h}}
\doxysubsubsection{\texorpdfstring{rtc\_read\_date()}{rtc\_read\_date()}}
{\footnotesize\ttfamily int rtc\+\_\+read\+\_\+date (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Reads the date from the RTC. 

\begin{DoxyReturn}{Returns}
0 if successful, non 0 otherwise 
\end{DoxyReturn}
\Hypertarget{rtc_8h_a76827856de45c0728d613f90c5f6e009}\label{rtc_8h_a76827856de45c0728d613f90c5f6e009} 
\index{rtc.h@{rtc.h}!rtc\_read\_reg@{rtc\_read\_reg}}
\index{rtc\_read\_reg@{rtc\_read\_reg}!rtc.h@{rtc.h}}
\doxysubsubsection{\texorpdfstring{rtc\_read\_reg()}{rtc\_read\_reg()}}
{\footnotesize\ttfamily int rtc\+\_\+read\+\_\+reg (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{reg,  }\item[{uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{data }\end{DoxyParamCaption})}



Reads a register from the RTC. 


\begin{DoxyParams}{Parameters}
{\em reg} & Register to read \\
\hline
{\em data} & Pointer to the variable that will store the data read \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if successful, non 0 otherwise 
\end{DoxyReturn}
\Hypertarget{rtc_8h_a0a6fd09353e9e32173333e7a32997c88}\label{rtc_8h_a0a6fd09353e9e32173333e7a32997c88} 
\index{rtc.h@{rtc.h}!rtc\_set\_alarm@{rtc\_set\_alarm}}
\index{rtc\_set\_alarm@{rtc\_set\_alarm}!rtc.h@{rtc.h}}
\doxysubsubsection{\texorpdfstring{rtc\_set\_alarm()}{rtc\_set\_alarm()}}
{\footnotesize\ttfamily int rtc\+\_\+set\+\_\+alarm (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Sets the alarm of the RTC. 

\begin{DoxyReturn}{Returns}
0 if successful, non 0 otherwise 
\end{DoxyReturn}
\Hypertarget{rtc_8h_a11e438d0669b30b2c97af0665ec96ed1}\label{rtc_8h_a11e438d0669b30b2c97af0665ec96ed1} 
\index{rtc.h@{rtc.h}!rtc\_set\_regB\_bit@{rtc\_set\_regB\_bit}}
\index{rtc\_set\_regB\_bit@{rtc\_set\_regB\_bit}!rtc.h@{rtc.h}}
\doxysubsubsection{\texorpdfstring{rtc\_set\_regB\_bit()}{rtc\_set\_regB\_bit()}}
{\footnotesize\ttfamily int rtc\+\_\+set\+\_\+reg\+B\+\_\+bit (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Sets bit 7 of register B to 1. 

\begin{DoxyReturn}{Returns}
0 if successful, non 0 otherwise 
\end{DoxyReturn}
\Hypertarget{rtc_8h_ab24e6f39ef99db1cdf9a2c6e26233bb3}\label{rtc_8h_ab24e6f39ef99db1cdf9a2c6e26233bb3} 
\index{rtc.h@{rtc.h}!rtc\_subscribe\_int@{rtc\_subscribe\_int}}
\index{rtc\_subscribe\_int@{rtc\_subscribe\_int}!rtc.h@{rtc.h}}
\doxysubsubsection{\texorpdfstring{rtc\_subscribe\_int()}{rtc\_subscribe\_int()}}
{\footnotesize\ttfamily int rtc\+\_\+subscribe\+\_\+int (\begin{DoxyParamCaption}\item[{uint16\+\_\+t \texorpdfstring{$\ast$}{*}}]{bit\+\_\+no }\end{DoxyParamCaption})}



Subscribes and enables RTC interrupts. 


\begin{DoxyParams}{Parameters}
{\em bit\+\_\+no} & pointer to the variable to store the bit number \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if successful, non 0 otherwise 
\end{DoxyReturn}
\Hypertarget{rtc_8h_ab8f17bf5280c908c8b199a90fefcc758}\label{rtc_8h_ab8f17bf5280c908c8b199a90fefcc758} 
\index{rtc.h@{rtc.h}!rtc\_unsubscribe\_int@{rtc\_unsubscribe\_int}}
\index{rtc\_unsubscribe\_int@{rtc\_unsubscribe\_int}!rtc.h@{rtc.h}}
\doxysubsubsection{\texorpdfstring{rtc\_unsubscribe\_int()}{rtc\_unsubscribe\_int()}}
{\footnotesize\ttfamily int rtc\+\_\+unsubscribe\+\_\+int (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Unsubscribes RTC interrupts. 

\begin{DoxyReturn}{Returns}
0 if successful, non 0 otherwise 
\end{DoxyReturn}
\Hypertarget{rtc_8h_aa1fd64645937078b75ec6046b11b432e}\label{rtc_8h_aa1fd64645937078b75ec6046b11b432e} 
\index{rtc.h@{rtc.h}!rtc\_write\_reg@{rtc\_write\_reg}}
\index{rtc\_write\_reg@{rtc\_write\_reg}!rtc.h@{rtc.h}}
\doxysubsubsection{\texorpdfstring{rtc\_write\_reg()}{rtc\_write\_reg()}}
{\footnotesize\ttfamily int rtc\+\_\+write\+\_\+reg (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{reg,  }\item[{uint8\+\_\+t}]{data }\end{DoxyParamCaption})}



Writes a register from the RTC. 


\begin{DoxyParams}{Parameters}
{\em reg} & Register to write \\
\hline
{\em data} & Data to write \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if successful, non 0 otherwise 
\end{DoxyReturn}
